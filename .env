# SmartEdify Auth Service - Configuración para Windows
# Copia este archivo a .env y ajusta según tu entorno

# Entorno
ENVIRONMENT=development

# Servidor
SERVER_PORT=8081
SERVER_HOST=0.0.0.0
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000,http://127.0.0.1:8080
SERVER_READ_TIMEOUT=30
SERVER_WRITE_TIMEOUT=30

# Base de Datos PostgreSQL
# Opción 1: Docker (recomendado)
DATABASE_URL=postgres://postgres@localhost:5432/smartedify_auth?sslmode=disable

# Opción 2: Instalación local de PostgreSQL
# DATABASE_URL=postgres://postgres:tu_password@localhost:5432/smartedify_auth?sslmode=disable

DB_HOST=localhost
DB_PORT=5432
DB_NAME=smartedify_auth
DB_USER=postgres
DB_PASSWORD=password
DB_SSL_MODE=disable
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=300

# Redis
# Opción 1: Docker (recomendado)
REDIS_ADDRESS=localhost:6379

# Opción 2: Redis local o en la nube
# REDIS_ADDRESS=tu-redis-host:6379
# REDIS_PASSWORD=tu_password

REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2

# HSM (Hardware Security Module) - Configuración de desarrollo
# En desarrollo usamos claves mock, en producción usar AWS CloudHSM
HSM_ENDPOINT=mock://localhost
HSM_REGION=us-east-1
HSM_CLUSTER_ID=mock-cluster
HSM_KEY_ID=smartedify-jwt-key-dev
HSM_ACCESS_KEY_ID=mock-access-key
HSM_SECRET_KEY=mock-secret-key

# WhatsApp Business API
# Para desarrollo, usar cliente mock
# En producción, configurar con credenciales reales de Meta/Twilio
WHATSAPP_API_ENDPOINT=mock://localhost
WHATSAPP_API_KEY=mock-api-key
WHATSAPP_FROM_NUMBER=+1234567890
WHATSAPP_TIMEOUT=30

# JWT Configuration
JWT_ISSUER=smartedify-auth-service
JWT_AUDIENCE=smartedify-api
JWT_ACCESS_TOKEN_TTL=3600
JWT_REFRESH_TOKEN_TTL=604800
JWT_KEY_ROTATION_DAYS=90
JWT_KEY_VERSION=v1

# Seguridad
# Genera una clave de 32 caracteres para producción
ENCRYPTION_KEY=dev-key-32-chars-for-local-dev-only
DPOP_TTL=300
RATE_LIMIT_PER_IP=1000
RATE_LIMIT_PER_USER=500
MAX_LOGIN_ATTEMPTS=5
BLOCK_DURATION=300

# Monitoreo y Observabilidad
PROMETHEUS_PORT=9090
JAEGER_ENDPOINT=http://localhost:14268/api/traces
LOG_LEVEL=debug
ENABLE_TRACING=true
ENABLE_METRICS=true

# Configuración específica para Windows
# Ajusta estas rutas según tu instalación
# POSTGRES_BIN_PATH=C:\Program Files\PostgreSQL\15\bin
# REDIS_BIN_PATH=C:\Program Files\Redis